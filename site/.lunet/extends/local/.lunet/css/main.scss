/**********************************************
 * general (template-shared foundation)
 **********************************************/

$lunet-top-offset: 120.5px;
$font-size-base: 1rem;
$font-family-base: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans", "Liberation Sans", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";

$bootstrap-icons-font-dir: "../fonts";

@import "bootstrap";
@import "bootstrap-icons";

// Root Loops ANSI sources (keep these links to regenerate/tweak later):
// - Dark: https://rootloops.sh/?sugar=7&colors=9&sogginess=4&flavor=1&milk=0.84&fruit=8
// - Light: https://rootloops.sh/?sugar=6&colors=9&sogginess=4&flavor=1&milk=3&fruit=8
$lunet-dark-ansi: (
    black: #1a2f3d,
    red: #f75b72,
    green: #67af34,
    yellow: #c98b1a,
    blue: #509af6,
    magenta: #ca64f3,
    cyan: #1faeae,
    white: #81accc,
    brightBlack: #395b72,
    brightRed: #fb8590,
    brightGreen: #75c73b,
    brightYellow: #e49f27,
    brightBlue: #77b1fb,
    brightMagenta: #d68af7,
    brightCyan: #24c6c6,
    brightWhite: #c4dbeb
);

$lunet-light-ansi: (
    black: #d5e5f1,
    red: #e73359,
    green: #59972d,
    yellow: #ae7714,
    blue: #2d83e8,
    magenta: #ba3ce8,
    cyan: #1a9696,
    white: #36566c,
    brightBlack: #87b1d0,
    brightRed: #f75b72,
    brightGreen: #67af34,
    brightYellow: #c98b1a,
    brightBlue: #509af6,
    brightMagenta: #ca64f3,
    brightCyan: #1faeae,
    brightWhite: #142530
);

$lunet-dark-core: (
    background: #09151d,
    foreground: #d9e8f2,
    cursor: #81accc,
    border: rgba(217, 232, 242, 0.16),
    borderStrong: rgba(217, 232, 242, 0.28),
    surface1: #0f202b,
    surface2: #153042,
    codeBg: #0d1c26,
    codeInlineBg: #102430,
    codeSelectionBg: #254763,
    blockquoteBg: rgba(255, 255, 255, 0.04),
    blockquoteBorder: #1faeae
);

$lunet-light-core: (
    background: #eef5f9,
    foreground: #02060b,
    cursor: #36566c,
    border: rgba(2, 6, 11, 0.14),
    borderStrong: rgba(2, 6, 11, 0.28),
    surface1: #e5eef4,
    surface2: #d5e5f1,
    codeBg: #e5eef4,
    codeInlineBg: #dbe8f1,
    codeSelectionBg: #bfd8ea,
    blockquoteBg: rgba(15, 23, 42, 0.06),
    blockquoteBorder: #1a9696
);

$lunet-dark-prism: (
    text: #d4d4d4,
    inlineColor: #db4c69,
    comment: #6a9955,
    punctuation: #d4d4d4,
    number: #b5cea8,
    string: #ce9178,
    operator: #d4d4d4,
    keyword: #569cd6,
    keywordAlt: #c586c0,
    function: #dcdcaa,
    className: #4ec9b0,
    tag: #569cd6,
    tagPunctuation: #808080,
    attrName: #9cdcfe,
    attrValue: #ce9178,
    regex: #d16969,
    important: #569cd6,
    lineHighlightBg: #f7ebc6,
    lineHighlightBorder: #f7d87c,
    toolbarForeground: #a69eb6
);

$lunet-light-prism: (
    text: #1f2533,
    inlineColor: #b42345,
    comment: #6a9955,
    punctuation: #5b6470,
    number: #0f766e,
    string: #b45309,
    operator: #374151,
    keyword: #2563eb,
    keywordAlt: #7c3aed,
    function: #a16207,
    className: #0e7490,
    tag: #2563eb,
    tagPunctuation: #6b7280,
    attrName: #0e7490,
    attrValue: #b45309,
    regex: #be123c,
    important: #1d4ed8,
    lineHighlightBg: #fff3bf,
    lineHighlightBorder: #f6cc5b,
    toolbarForeground: #4b5563
);

@function lunet-token($map, $key) {
    @return map-get($map, $key);
}

@mixin lunet-theme-vars($core, $ansi, $prism) {
    $background: lunet-token($core, background);
    $foreground: lunet-token($core, foreground);

    --lunet-color-background: #{$background};
    --lunet-color-background-rgb: #{red($background)}, #{green($background)}, #{blue($background)};
    --lunet-color-foreground: #{$foreground};
    --lunet-color-foreground-rgb: #{red($foreground)}, #{green($foreground)}, #{blue($foreground)};
    --lunet-color-cursor: #{lunet-token($core, cursor)};
    --lunet-color-surface-1: #{lunet-token($core, surface1)};
    --lunet-color-surface-2: #{lunet-token($core, surface2)};
    --lunet-color-border: #{lunet-token($core, border)};
    --lunet-color-border-strong: #{lunet-token($core, borderStrong)};

    --lunet-color-black: #{lunet-token($ansi, black)};
    --lunet-color-red: #{lunet-token($ansi, red)};
    --lunet-color-green: #{lunet-token($ansi, green)};
    --lunet-color-yellow: #{lunet-token($ansi, yellow)};
    --lunet-color-blue: #{lunet-token($ansi, blue)};
    --lunet-color-magenta: #{lunet-token($ansi, magenta)};
    --lunet-color-cyan: #{lunet-token($ansi, cyan)};
    --lunet-color-white: #{lunet-token($ansi, white)};
    --lunet-color-bright-black: #{lunet-token($ansi, brightBlack)};
    --lunet-color-bright-red: #{lunet-token($ansi, brightRed)};
    --lunet-color-bright-green: #{lunet-token($ansi, brightGreen)};
    --lunet-color-bright-yellow: #{lunet-token($ansi, brightYellow)};
    --lunet-color-bright-blue: #{lunet-token($ansi, brightBlue)};
    --lunet-color-bright-magenta: #{lunet-token($ansi, brightMagenta)};
    --lunet-color-bright-cyan: #{lunet-token($ansi, brightCyan)};
    --lunet-color-bright-white: #{lunet-token($ansi, brightWhite)};

    --lunet-code-bg: #{lunet-token($core, codeBg)};
    --lunet-code-inline-bg: #{lunet-token($core, codeInlineBg)};
    --lunet-code-selection-bg: #{lunet-token($core, codeSelectionBg)};
    --lunet-blockquote-bg: #{lunet-token($core, blockquoteBg)};
    --lunet-blockquote-border: #{lunet-token($core, blockquoteBorder)};

    --lunet-prism-text: #{lunet-token($prism, text)};
    --lunet-prism-inline-color: #{lunet-token($prism, inlineColor)};
    --lunet-prism-comment: #{lunet-token($prism, comment)};
    --lunet-prism-punctuation: #{lunet-token($prism, punctuation)};
    --lunet-prism-number: #{lunet-token($prism, number)};
    --lunet-prism-string: #{lunet-token($prism, string)};
    --lunet-prism-operator: #{lunet-token($prism, operator)};
    --lunet-prism-keyword: #{lunet-token($prism, keyword)};
    --lunet-prism-keyword-alt: #{lunet-token($prism, keywordAlt)};
    --lunet-prism-function: #{lunet-token($prism, function)};
    --lunet-prism-class-name: #{lunet-token($prism, className)};
    --lunet-prism-tag: #{lunet-token($prism, tag)};
    --lunet-prism-tag-punctuation: #{lunet-token($prism, tagPunctuation)};
    --lunet-prism-attr-name: #{lunet-token($prism, attrName)};
    --lunet-prism-attr-value: #{lunet-token($prism, attrValue)};
    --lunet-prism-regex: #{lunet-token($prism, regex)};
    --lunet-prism-important: #{lunet-token($prism, important)};
    --lunet-prism-line-highlight-bg: #{lunet-token($prism, lineHighlightBg)};
    --lunet-prism-line-highlight-border: #{lunet-token($prism, lineHighlightBorder)};
    --lunet-prism-toolbar-foreground: #{lunet-token($prism, toolbarForeground)};

    --bs-body-bg-rgb: var(--lunet-color-background-rgb);
    --bs-body-bg: var(--lunet-color-background);
    --bs-body-color-rgb: var(--lunet-color-foreground-rgb);
    --bs-body-color: var(--lunet-color-foreground);
    --bs-border-color: var(--lunet-color-border);
    --bs-tertiary-bg: var(--lunet-color-surface-1);
    --bs-secondary-bg: var(--lunet-color-surface-2);
    --bs-link-color: var(--lunet-color-blue);
    --bs-link-hover-color: var(--lunet-color-bright-blue);
    --bs-emphasis-color: var(--lunet-color-foreground);
    --bs-body-color-darker-20: color-mix(in srgb, var(--bs-body-color) 80%, var(--bs-body-bg));
    --bs-body-color-darker-10: color-mix(in srgb, var(--bs-body-color) 90%, var(--bs-body-bg));
}

:root {
    color-scheme: light dark;
    --bs-font-sans-serif: #{inspect($font-family-base)};
    @include lunet-theme-vars($lunet-light-core, $lunet-light-ansi, $lunet-light-prism);
}

:root[data-bs-theme="light"] {
    @include lunet-theme-vars($lunet-light-core, $lunet-light-ansi, $lunet-light-prism);
}

:root[data-bs-theme="dark"] {
    @include lunet-theme-vars($lunet-dark-core, $lunet-dark-ansi, $lunet-dark-prism);
}

@media (prefers-color-scheme: dark) {
    :root[data-lunet-theme-mode="system"]:not([data-bs-theme]) {
        @include lunet-theme-vars($lunet-dark-core, $lunet-dark-ansi, $lunet-dark-prism);
    }
}

$search-bg: lighten($body-bg, 5%);

.lunet-logo {
    display: block;
    width: auto;
    height: 96px;
}

// Show focus only for keyboard users
#lunet .navbar-brand:focus {
    outline: none;
}

#lunet .navbar-brand:focus-visible {
    outline: 2px dotted var(--bs-link-color);
    outline-offset: 4px;
    border-radius: 4px;
}

body {
    width: calc(100vw - 34px); /* https://stackoverflow.com/a/25981719 */
}

a {
    text-decoration-line: underline;
    text-decoration-style: dotted;
}

h1, h2, h3, h4, h5, h6 {
    outline: none;
    padding-bottom: 0.25em;
    scroll-margin-top: $lunet-top-offset;
}

#lunet .breadcrumb {
    padding-left: 0.1rem
}

// Bootstrap Icons helpers
.lunet-icon,
.lunet-feature-icon {
    margin-right: 0.55rem;
    vertical-align: -0.1em;
}

.lunet-feature-icon {
    font-size: 1.15em;
}

// Semantic accent colors for icons (keep these lightweight and reusable).
.lunet-icon--input { color: var(--lunet-color-yellow); }
.lunet-icon--actions { color: var(--lunet-color-green); }
.lunet-icon--lists { color: var(--lunet-color-cyan); }
.lunet-icon--layout { color: var(--lunet-color-magenta); }
.lunet-icon--scroll { color: var(--lunet-color-blue); }
.lunet-icon--chrome { color: var(--lunet-color-bright-white); }
.lunet-icon--data { color: var(--lunet-color-blue); }
.lunet-icon--overlays { color: var(--lunet-color-magenta); }

.lunet-icon--binding { color: var(--lunet-color-cyan); }
.lunet-icon--controls { color: var(--lunet-color-green); }
.lunet-icon--editing { color: var(--lunet-color-yellow); }
.lunet-icon--themes { color: var(--lunet-color-magenta); }
.lunet-icon--debug { color: var(--lunet-color-red); }

.lunet-color-0 {
    color: var(--lunet-color-red);
}
.lunet-color-1 {
    color: var(--lunet-color-yellow);
}
.lunet-color-2 {
    color: var(--lunet-color-green);
}
.lunet-color-3 {
    color: var(--lunet-color-cyan);
}

blockquote {
    color: color-mix(in srgb, var(--bs-body-color) 85%, var(--bs-body-bg));
    background-color: var(--lunet-blockquote-bg);
    border-left-color: var(--lunet-blockquote-border);
    border-left-style: solid;
    border-left-width: 5px;
    padding-left: 10px;
}

*:focus {
    outline: 0 !important;
}

button.copy-to-clipboard-button > span {
    @extend .bi;
    @extend .bi-copy;
}

button.copy-to-clipboard-button[data-copy-state="copy-success"] > span {
    @extend .bi-check-lg;
    color: var(--lunet-color-green);
}

button.copy-to-clipboard-button[data-copy-state="copy-error"] > span {
    @extend .bi-x-lg;
    color: var(--lunet-color-red);
}

.c64-text {
    background-image: linear-gradient(to right,
        var(--lunet-color-bright-red),
        var(--lunet-color-bright-yellow),
        var(--lunet-color-bright-green),
        var(--lunet-color-bright-cyan),
        var(--lunet-color-bright-blue),
        var(--lunet-color-bright-magenta));
    background-clip: text;
    color: transparent;
}

.c64-number {
    color: var(--lunet-color-foreground);
    text-shadow:
        0 0 2px rgba(var(--lunet-color-background-rgb), 0.8),
        0 0 6px rgba(var(--lunet-color-background-rgb), 0.65),
        0 0 12px rgba(var(--lunet-color-background-rgb), 0.45),
        0 0 18px rgba(var(--lunet-color-background-rgb), 0.25);
}

.hero-text h1 {
    line-height: 1.08;
}

.hero-text span.c64-number,
.hero-text span.c64-text {
    // Scale down on narrow screens while keeping the desktop presence.
    font-size: clamp(2rem, 9vw, 3.75rem);
    overflow-wrap: anywhere;
    word-break: break-word;
}

@media screen and (max-width: 768px) {
    .hero-text span.c64-number,
    .hero-text span.c64-text {
        // Keep the product name on one line on phones.
        font-size: clamp(1.45rem, 7vw, 3rem);
        white-space: nowrap;
        overflow-wrap: normal;
        word-break: normal;
    }
}

/* Round the video container and clip overflow */
.c64-video-wrap {
    position: relative;
    z-index: 0; // ensure the wrapper forms a stacking context
}

.c64-video-wrap::before {
    content: "";
    position: absolute;
    inset: -2rem -3rem -30rem -3rem;                 // glow outside the video bounds
    background-image: linear-gradient(
        0deg,
        transparent 33%,
        color-mix(in srgb, var(--lunet-color-magenta) 50%, transparent),
        color-mix(in srgb, var(--lunet-color-blue) 55%, transparent),
        color-mix(in srgb, var(--lunet-color-cyan) 45%, transparent)
    );
    filter: blur(5rem);
    z-index: -1;                  // behind the video
    pointer-events: none;
}

.c64-video {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;            // fill the frame without distortion
}

.carousel-caption {
    padding-left: 2rem;
}

.svg-diagram {
  width: 100%;
  max-width: 1200px;  /* pick your target max size */
  height: auto;
  padding-bottom: 1em;
}

/**********************************************
 * terminal screenshots (faux window chrome)
 **********************************************/

.terminal-window {
    display: inline-block;
    max-width: 100%;
    margin: 1rem 0;
    border-radius: 14px;
    overflow: hidden;
    background: var(--lunet-color-background);
    border: 1px solid rgba(var(--lunet-color-foreground-rgb), 0.14);
    box-shadow:
        0 20px 60px rgba(0, 0, 0, 0.45),
        0 6px 18px rgba(0, 0, 0, 0.35);
}

.terminal-window__bar {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    background: linear-gradient(
        to bottom,
        rgba(var(--lunet-color-foreground-rgb), 0.08),
        rgba(var(--lunet-color-foreground-rgb), 0.03)
    );
    border-bottom: 1px solid rgba(var(--lunet-color-foreground-rgb), 0.10);
}

.terminal-window__controls {
    display: inline-flex;
    gap: 0.5rem;
    align-items: center;
    flex: 0 0 auto;
}

.terminal-window__dot {
    width: 12px;
    height: 12px;
    border-radius: 999px;
    box-shadow:
        inset 0 0 0 1px rgba(0, 0, 0, 0.25),
        0 1px 0 rgba(255, 255, 255, 0.06);
}

.terminal-window__dot--red { background: var(--lunet-color-red); }
.terminal-window__dot--yellow { background: var(--lunet-color-yellow); }
.terminal-window__dot--green { background: var(--lunet-color-green); }

.terminal-window__title {
    flex: 1 1 auto;
    text-align: center;
    font-weight: 600;
    font-size: 0.95rem;
    line-height: 1.2;
    color: rgba(var(--lunet-color-foreground-rgb), 0.88);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding-right: 2.5rem; // compensate for left controls to keep title visually centered
}

.terminal-window__content {
    background: var(--lunet-color-background);
}

.terminal-window__content > .terminal {
    display: block;
    max-width: 100%;
    height: auto;
}

// When embedding videos, lunet adds width/height attributes which can unintentionally shrink the player.
// Force the video to fill the chrome frame width while preserving aspect ratio.
.terminal-window__content > video.terminal {
    width: 100%;
}

// Frontpage hero media: give it more presence without affecting regular screenshots.
.terminal-window--hero {
    display: block;
    width: min(1200px, 100%);
    margin: 1.25rem auto 1.5rem auto;
}

/**********************************************
 * alerts (NOTE, TIP, WARNING, CAUTION, IMPORTANT)
 **********************************************/

@mixin lunet-alert-icon {
    @extend .bi;
    font-size: 1.3em;
    padding-right: 0.5rem;
    width: 1.4em;
}

@mixin lunet-alert {
    @extend .alert;
    border-radius: .5em;
}

@mixin lunet-alert-heading-text {
    font-weight: bold;
    content: "Information";
}

.lunet-alert-note-icon {
    @include lunet-alert-icon;
    @extend .bi-info-circle;
}

.lunet-alert-note {
    @include lunet-alert;
    @extend .alert-info;
}

.lunet-alert-note-heading-text::before {
    @include lunet-alert-heading-text;
    content: "Note";
}

.lunet-alert-tip-icon {
    @include lunet-alert-icon;
    @extend .bi-lightbulb;
}

.lunet-alert-tip {
    @include lunet-alert;
    @extend .alert-success;
}

.lunet-alert-tip-heading-text::before {
    @include lunet-alert-heading-text;
    content: "Tip";
}

.lunet-alert-warning-icon {
    @include lunet-alert-icon;
    @extend .bi-exclamation-triangle;
}

.lunet-alert-warning {
    @include lunet-alert;
    @extend .alert-warning;
}

.lunet-alert-warning-heading-text::before {
    @include lunet-alert-heading-text;
    content: "Warning";
}

.lunet-alert-important-icon {
    @include lunet-alert-icon;
    @extend .bi-flag;
}

.lunet-alert-caution-icon {
    @include lunet-alert-icon;
    @extend .bi-exclamation-triangle;
}

.lunet-alert-important {
    @include lunet-alert;
    @extend .alert-primary;
}

.lunet-alert-caution {
    @include lunet-alert;
    @extend .alert-danger;
}

.lunet-alert-caution-heading-text::before {
    @include lunet-alert-heading-text;
    content: "Caution";
}

.lunet-alert-important-heading-text::before {
    @include lunet-alert-heading-text;
    content: "Important";
}

.lunet-alert-callout-icon {
    @include lunet-alert-icon;
    @extend .bi-megaphone;
}

.lunet-alert-callout {
    @include lunet-alert;
    @extend .alert-success;
    @extend .alert-dismissible;
}

.lunet-alert-callout-heading-text::before {
    @include lunet-alert-heading-text;
    content: "Announcement";
}

/**********************************************
 * search bar
 **********************************************/
/* Bootstrap 5-powered search dropdown */
.lunet-search .dropdown-menu {
    max-height: 50vh;
    overflow-x: hidden;
    overflow-y: auto;
    z-index: 1055; /* above sticky navbar (1020) */
}

/**********************************************
 * frontpage
 **********************************************/
.lunet-home h3 > i {
    margin-right: 1rem;
}

.lunet-home h3 i.bi {
    text-shadow: 1px 1px 3px #444444;
}

.img-card {
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    margin-bottom: 0.8rem;
    border-radius: 0.6rem!important;
    width: 332px;
}

/**********************************************
 * top navigation bar
 **********************************************/
#lunet .navbar .navbar-nav a {
    padding-top: 4px;
}

#lunet .navbar .navbar-nav li {
    margin-right: 10px;
}

#lunet .navbar a {
    text-decoration: none;
}

#lunet .navbar .navbar-nav a i.bi {
    margin-right: 0.4rem;
    opacity: 0.9;
    color: currentColor;
}

#lunet li.nav-item.active {
    // use text-shadow instead of font-weight to avoid resize of container and shift of the following menu items
    //text-shadow: 0px 0px 1px $body-color-bold-shadow;
    border-bottom-color: var(--lunet-color-blue);
    border-bottom-style: solid;
}

#lunet .navbar-right .btn .bi {
    padding: 0.25rem;
}

#lunet .lunet-theme-toggle {
    display: inline-flex;
    align-items: center;
    gap: 0.45rem;
    min-width: 8.25rem;
    justify-content: center;
    border-color: var(--lunet-color-border-strong);
    color: var(--bs-body-color);
    background-color: color-mix(in srgb, var(--lunet-color-surface-1) 70%, transparent);
}

#lunet .lunet-theme-toggle:hover,
#lunet .lunet-theme-toggle:focus-visible {
    background-color: color-mix(in srgb, var(--lunet-color-surface-2) 88%, transparent);
    border-color: var(--lunet-color-blue);
}

#lunet .dropdown-menu {
    border-color: var(--lunet-color-border);
    background-color: var(--lunet-color-surface-1);
}

#lunet .dropdown-item.active,
#lunet .dropdown-item:active {
    color: var(--bs-body-color);
    background-color: var(--lunet-color-surface-2);
}

.bi-heart {
    color: #ea4aaa;
}

#lunet .navbar {
    background-color: var(--bs-body-bg);
}

footer {
    text-align: center;
    font-size: 0.9rem;
}

/**********************************************
 * menu in documentation
 **********************************************/
#docs-sidebar-menu ol.menu {
    list-style: none;
    padding-inline-start: 0px;
}

#docs-sidebar-menu span.menu-item-row {
    display: flex;
    align-items: flex-start;
    gap: 0.35rem;
    padding-bottom: 0.8rem;
}

#docs-sidebar-menu a.menu-link {
    display: block;
    flex: 1 1 auto;
    min-width: 0;
    color: var(--bs-body-color-darker-10);
}

#docs-sidebar-menu a.menu-link i.bi {
    width: 1.25em;
    display: inline-block;
    text-align: center;
    margin-right: 0.55rem;
    opacity: 0.9;
    color: currentColor;
}

#docs-sidebar-menu a.menu-link-show {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto;
    margin-left: auto;
    padding-left: 0.35rem;
}

.menu-separator
{
    font-weight: bold;
}

#docs-sidebar-menu li.menu-item > span > a.menu-link:hover {
    color: var(--bs-body-color);
}

#docs-sidebar-menu li.menu-item.active > span > a.menu-link {
    display: inline-block;
    width: 100%;
    font-weight: 600;
    color: var(--bs-link-color);
}

#docs-sidebar-menu a.menu-link-show::before,
#docs-sidebar-menu a.menu-link-show.collapsed::before {
    @extend .bi;
    @extend .bi-chevron-right;
}

#docs-sidebar-menu ol.menu ol.menu  {
    margin-left: 0.8rem;
}

#docs-sidebar-menu li.menu-item {
    list-style-type: none;
    padding-inline-start: 0px;
    border-width: thin;
    border-color: var(--lunet-color-border);
    border-top-style: none;
    border-left-style: none;
    border-right-style: none;
    border-bottom-style: solid;
}

#docs-sidebar-menu li.menu-item li.menu-item:last-child {
    border-bottom-style: none;
}

#docs-sidebar-menu li.menu-item a
{
    text-decoration-line: none;
}

.menu-level1, .menu-level2, .menu-level3, .menu-level4 {
    font-size: 0.95em;
}

table.api-dotnet-members-table td:first-child {
    white-space: nowrap;
    width: 30%;
}

table.api-dotnet-members-table td {
    vertical-align: top;
}

.api-dotnet-kind-icon {
    margin-right: 0.35rem;
    opacity: 0.85;
}

.api-dotnet-count {
    font-size: 0.85em;
    font-weight: 400;
    opacity: 0.75;
}

.api-dotnet-definition {
    margin: 0.65rem 0 0.9rem 0;
    padding: 0.65rem 0.9rem;
    border: 1px solid var(--lunet-color-border);
    border-radius: 0.75rem;
    background: var(--lunet-color-surface-1);
    display: flex;
    flex-direction: column;
    gap: 0;
}

.api-dotnet-definition-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 1rem;
}

.api-dotnet-definition-meta {
    display: grid;
    gap: 0.2rem;
    flex: 1 1 auto;
}

.api-dotnet-inline-list {
    display: inline;
}

.api-dotnet-label {
    font-size: 0.85em;
    font-weight: 600;
    opacity: 0.85;
    margin-right: 0.35rem;
    display: inline-block;
    min-width: 6rem;
}

.api-dotnet-definition-actions {
    flex: 0 0 auto;
}

.api-dotnet-definition .api-dotnet-inherited {
    margin: 0.45rem 0 0;
    padding: 0.35rem 0.5rem;
    border: 1px solid var(--lunet-color-border);
    border-radius: 0.5rem;
    background: var(--lunet-color-surface-2);
}

.api-dotnet-action {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    text-decoration: none;
    padding: 0.25rem 0.6rem;
    border: 1px solid var(--lunet-color-border);
    border-radius: 0.5rem;
    background: var(--lunet-color-surface-2);
    color: var(--bs-link-color);
}

.api-dotnet-action:hover {
    border-color: var(--lunet-color-border-strong);
    color: var(--bs-link-hover-color);
}

.api-dotnet-parameter {
    margin: 0.4rem 0 0.6rem 0;
    padding: 0.45rem 0.7rem;
    border: 1px solid var(--lunet-color-border);
    border-radius: 0.5rem;
    background: var(--lunet-color-surface-1);
}

.api-dotnet-parameter-list {
    margin: 0;
    display: grid;
    grid-template-columns: auto 1fr;
    column-gap: 0.75rem;
    row-gap: 0.25rem;
}

.api-dotnet-parameter-list dt {
    font-family: var(--bs-font-monospace);
    font-weight: 600;
}

.api-dotnet-parameter-list dd {
    margin: 0;
    opacity: 0.9;
}

.api-dotnet-inherited > summary {
    cursor: pointer;
    font-weight: 600;
    font-size: 0.85em;
}

.api-dotnet-member-filter {
    margin: 0.75rem 0 0.45rem 0;
    padding: 0.45rem 0.65rem;
    border: 1px solid var(--lunet-color-border);
    border-radius: 0.75rem;
    background: var(--lunet-color-surface-1);
}

.api-dotnet-member-filter-row {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    flex-wrap: wrap;
}

.api-dotnet-member-filter-label {
    font-weight: 600;
    margin: 0;
    white-space: nowrap;
}

.api-dotnet-member-filter-input {
    flex: 1 1 24rem;
    min-width: 14rem;
}

.api-dotnet-member-filter-help,
.api-dotnet-member-filter-status {
    margin-top: 0.25rem;
    font-size: 0.85em;
    opacity: 0.85;
}

.api-dotnet-member-filter-status {
    margin-top: 0;
    margin-left: auto;
    white-space: nowrap;
}

.api-dotnet-member-filter-help {
    display: none;
}

.api-dotnet-member-filter:focus-within .api-dotnet-member-filter-help {
    display: block;
}

@include media-breakpoint-up(md) {
    .api-dotnet-member-filter-row {
        flex-wrap: nowrap;
    }
}

.api-dotnet h1 {
    line-height: 1.05;
    margin-bottom: 0.35rem;
}

.api-dotnet h2 {
    margin-top: 1.25rem;
}

.api-dotnet h3 {
    margin-top: 1rem;
    font-size: 1.35rem;
}

.api-dotnet-members .api-dotnet-member-item {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    gap: 1rem;
}

.api-dotnet-members .api-dotnet-member-title {
    flex: 0 0 auto;
    white-space: nowrap;
    max-width: 55%;
    overflow: hidden;
    text-overflow: ellipsis;
}

.api-dotnet-members .api-dotnet-member-title-link {
    display: inline-flex;
    align-items: baseline;
    gap: 0.35rem;
    text-decoration: none;
}

.api-dotnet-members .api-dotnet-member-title-link:hover .api-dotnet-member-name {
    text-decoration: underline;
}

.api-dotnet-members .api-dotnet-member-name {
    font-family: var(--bs-font-monospace);
    font-weight: 600;
}

.api-dotnet-members .api-dotnet-member-summary {
    flex: 1 1 auto;
    opacity: 0.9;
    text-align: right;
    max-width: 45%;
    overflow: hidden;
    text-overflow: ellipsis;
}

@include media-breakpoint-down(sm) {
    .api-dotnet-members .api-dotnet-member-item {
        flex-direction: column;
        align-items: flex-start;
    }

    .api-dotnet-members .api-dotnet-member-title,
    .api-dotnet-members .api-dotnet-member-summary {
        max-width: none;
        text-align: left;
        white-space: normal;
    }
}

/**********************************************
 * toc in documentation
 **********************************************/
#docs-sidebar-toc .toc-link::before {
    width: 0px;
}

.menu-sidebar {
    top: $lunet-top-offset;

    // Keep docs sidebars navigable when the menu is taller than the viewport.
    // (Works with Bootstrap's `sticky-top` and `collapse` behavior.)
    max-height: calc(100vh - #{$lunet-top-offset});
    overflow-y: auto;
    overflow-x: hidden;
    overscroll-behavior: contain;
}

// Only apply low z-index when sidebar is visible as a regular column (not offcanvas)
@include media-breakpoint-up(md) {
    #docs-sidebar-menu.menu-sidebar {
        z-index: 0;
    }
}

#docs-sidebar-toc.menu-sidebar {
    z-index: 0;
}

li.toc-list-item {
    list-style-type: none;
}

#docs-sidebar-toc a.toc-link {
    text-decoration-line: none;
    //text-decoration-style: dotted;
    color: var(--bs-body-color-darker-20);
    //color: var(--bs-body-color);
}

#docs-sidebar-toc a.toc-link:hover {
    text-decoration-line: none;
    text-decoration-style: solid;
    color: var(--bs-body-color-darker-10);
}

#docs-sidebar-toc a.toc-link {
    display: inline-block;
    width: 100%;
}

#docs-sidebar-toc .js-toc a.toc-link.is-active-link {
    border-left-color: var(--lunet-color-cyan);
    border-left-style: solid;
}

#docs-sidebar-toc .js-toc a.toc-link {
    display: block;
    padding: .125rem 0 .125rem .75rem;
    text-decoration: none;
    border-left: .125rem solid transparent;
}

#docs-sidebar-toc .toc-title {
    border-bottom-style: solid;
    border-bottom-width: thin;
    font-size: 1rem;
}

#docs-sidebar-toc .toc {
    padding-right: 3px;
}

// Scrollbar styling (theme-friendly)
.menu-sidebar,
.menu-sidebar * {
    scrollbar-width: thin; // Firefox
    scrollbar-color:
        rgba(var(--lunet-color-foreground-rgb), 0.28)
        rgba(var(--lunet-color-foreground-rgb), 0.06);
}

.menu-sidebar ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

.menu-sidebar ::-webkit-scrollbar-track {
    background-color: rgba(var(--lunet-color-foreground-rgb), 0.05);
}

.menu-sidebar ::-webkit-scrollbar-thumb {
    background-color: rgba(var(--lunet-color-foreground-rgb), 0.18);
    border-radius: 999px;
    border: 2px solid rgba(var(--lunet-color-foreground-rgb), 0.05);
}

.menu-sidebar ::-webkit-scrollbar-thumb:hover {
    background-color: rgba(var(--lunet-color-foreground-rgb), 0.26);
}

/* Remove sticky on mobile */
@media screen and (max-width: 768px) {
    .sticky-top {
        position: relative !important;
    }

    .select2-results__option {
        width: auto;
    }

    pre[class*="language-"] {
        font-size: 0.75rem;
    }

    .menu-sidebar {
        top: auto!important;
        max-height: 100dvh;
        overflow-y: hidden;
    }

    // On mobile, let the offcanvas body be the only scroll container.
    #docs-sidebar-menu {
        top: 0 !important;
        bottom: 0;
    }

    #docs-sidebar-menu .offcanvas-header {
        position: sticky;
        top: 0;
        z-index: 1;
        background-color: inherit;
    }

    #docs-sidebar-menu .offcanvas-body {
        max-height: calc(100dvh - 3.5rem);
        overflow-y: auto !important;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
        padding-bottom: max(1rem, env(safe-area-inset-bottom));
    }
}

/* Fix responsive offcanvas sidebar layout on large screens */
@include media-breakpoint-up(md) {
    #docs-sidebar-menu .offcanvas-body {
        display: block;
        padding: 0;
        overflow-y: visible;
    }
    #docs-sidebar-menu .offcanvas-header {
        display: none;
    }
}
